!function(r){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.lisp=r()}}(function(){return function r(n,t,e){function u(o,f){if(!t[o]){if(!n[o]){var c="function"==typeof require&&require;if(!f&&c)return c(o,!0);if(i)return i(o,!0);var a=new Error("Cannot find module '"+o+"'");throw a.code="MODULE_NOT_FOUND",a}var s=t[o]={exports:{}};n[o][0].call(s.exports,function(r){var t=n[o][1][r];return u(t?t:r)},s,s.exports,r,n,t,e)}return t[o].exports}for(var i="function"==typeof require&&require,o=0;o<e.length;o++)u(e[o]);return u}({1:[function(r,n,t){"use strict";function e(r){return r&&"undefined"!=typeof Symbol&&r.constructor===Symbol?"symbol":typeof r}function u(){var r=0;return function(n){return c(n)?r:(r++,n)}}var i=r("squad"),o=r("currify"),f=function(r,n){return("undefined"==typeof n?"undefined":e(n))===r},c=o(f,"undefined");n.exports=function(r){var n=u(),t=u(),e=a(n,"("),o=a(t,")");return r.forEach(i(e,o)),s(n,t),r};var a=function(r,n){return function(t){return t!==n?t:r(t)}},s=function(r,n){if(r()!==n())throw Error("different count of parentheses: open "+r()+", close "+n())}},{currify:10,squad:11}],2:[function(r,n,t){"use strict";function e(r){d(r);var n=void 0;return n=isNaN(r)?Array.isArray(r)?{type:"literal",value:r.map(u)}:o(r)?{type:"literal",value:i(r)}:{type:"identifier",value:r}:{type:"literal",value:Number(r)}}function u(r){return o(r)?i(r):isNaN(r)?r:Number(r)}function i(r){return r.slice(1,-1)}function o(r){return'"'===c(r)&&'"'===a(r)}n.exports=e;var f=r("./library"),c=f.head,a=f.last,s=function(r){return"string"==typeof r},l=Array.isArray,p=function(r){return s(r)||l(r)},d=function(r){if(!p(r))throw Error("input should be string or array!")}},{"./library":7}],3:[function(r,n,t){"use strict";function e(r){return r&&"undefined"!=typeof Symbol&&r.constructor===Symbol?"symbol":typeof r}var u=function(r,n){return("undefined"==typeof n?"undefined":e(n))===r};n.exports=function(r,n,t){if(!u(r,t))throw Error(n+" should be "+r+"!");return t}},{}],4:[function(r,n,t){"use strict";function e(r,n){this.scope=r,this.parent=n,this.get=function(r){var n=void 0;return r in this.scope?n=this.scope[r]:this.parent&&(n=this.parent.get(r)),n}}n.exports=e},{}],5:[function(r,n,t){"use strict";function e(r){if(Array.isArray(r)){for(var n=0,t=Array(r.length);n<r.length;n++)t[n]=r[n];return t}return Array.from(r)}function u(r,n){var t=c(r);if(r.length&&t.value in l)return l[t.value](r,n);var u=r[0],o=r.map(function(r){return i(r,n)}),f=c(o);return p(u.value,f),f.apply(void 0,e(a(o)))}n.exports=u;var i=r("./interpret"),o=r("./context"),f=r("./library"),c=f.head,a=f.tail,s=function(r){return"function"==typeof r},l={let:function(r,n){var t=r[1].reduce(function(r,t){return r.scope[t[0].value]=i(t[1],n),r},new o({},n));return i(r[2],t)},lambda:function(r,n){return function(){var t=arguments,e=r[1].reduce(function(r,n,e){return r[n.value]=t[e],r},{}),u=new o(e,n);return i(r[2],u)}},"if":function(r,n){return i(r[1],n)?i(r[2],n):i(r[3],n)}},p=function(r,n){if(!s(n))throw Error(r+" is not a function!")}},{"./context":4,"./interpret":6,"./library":7}],6:[function(r,n,t){"use strict";!function(){function t(r,n){var t=void 0,f=n||new e(u);return t=o(r)?i(r,f):"identifier"===r.type?f.get(r.value):r.value}n.exports=t;var e=r("./context"),u=r("./library"),i=r("./interpret-list"),o=Array.isArray}()},{"./context":4,"./interpret-list":5,"./library":7}],7:[function(r,n,t){"use strict";function e(r){return console.log(r),r}function u(r){return i(c(r,-1))}function i(r){return r[0]}function o(r){return c(r,1)}function f(r){return function(){return[].reduce.call(arguments,r)}}function c(r,n,t){return[].slice.call(r,n,t)}n.exports={print:e,head:i,tail:o,last:u,car:i,cdr:o,"+":f(function(r,n){return r+n}),"-":f(function(r,n){return r-n}),"*":f(function(r,n){return r*n}),"/":f(function(r,n){return r/n})}},{}],8:[function(r,n,t){"use strict";function e(r,n){u(r);var t;return n?(t=r.shift(),t?i(t,r)?(n.push(s(r)),f(r),n):"("===t?(n.push(e(r,[])),e(r,n)):")"===t?n:e(r,n.concat(a(t))):n.pop()):e(r,[])}function u(r){if(!Array.isArray(r))throw Error("input should be an array!")}function i(r,n){return"'"===r&&"("===n[0]}function o(r){var n=r.indexOf(")");return r.slice(1,n)}function f(r){var n=r.indexOf(")");r.splice(0,n+2)}var c=r("squad"),a=r("./categorize"),s=c(a,o);n.exports=e},{"./categorize":2,squad:11}],9:[function(r,n,t){"use strict";function e(r){u(r);for(var n=[],t=r,e=function(r,t){return n.push(t),""};t;)t=t.replace(o,e);return n}function u(r){if(!i(r))throw Error("expression should be string!")}var i=function(r){return"string"==typeof r};n.exports=e;var o=/^\s*((\r|\n|$)|#;|#\||#\\[^\w]|#?(\(|\[|{)|\)|\]|}|\'|`|,@|,|\+inf\.0|-inf\.0|\+nan\.0|\"(\\(.|$)|[^\"\\])*(\"|$)|[^\s()\[\]{}]+)/},{}],10:[function(r,n,t){"use strict";function e(r){if(Array.isArray(r)){for(var n=0,t=Array(r.length);n<r.length;n++)t[n]=r[n];return t}return Array.from(r)}function u(r){i(r);var n=o(arguments);return n.length>=r.length?r.apply(void 0,e(n)):function(){return u.apply(void 0,[r].concat(e(n),Array.prototype.slice.call(arguments)))}}function i(r){if("function"!=typeof r)throw Error("fn should be function!")}n.exports=u;var o=function(r){return[].slice.call(r,1)}},{}],11:[function(r,n,t){!function(r){"use strict";function t(){var r=[].slice.call(arguments).reverse();return u("function",r),function(){return r.reduce(e,arguments).pop()}}function e(r,n){return[n.apply(null,r)]}function u(r,n){var t=i(c,r),e=i(f,r);n.length?n.map(o).filter(e).forEach(t):t(r)}function i(r,n){return r.bind(null,n)}function o(r){return typeof r}function f(r,n){return r!==n}function c(r){throw Error("fn should be "+r+"!")}"undefined"!=typeof n&&n.exports?n.exports=t:r.squad=t}(this)},{}],lisp:[function(r,n,t){"use strict";var e=r("squad"),u=r("currify"),i=r("./interpret"),o=r("./parenthesize"),f=r("./tokenize"),c=r("./brackets-check"),a=r("./check"),s=u(a,"string"),l=s("expression"),p=e(i,o,c,f,l);n.exports=p},{"./brackets-check":1,"./check":3,"./interpret":6,"./parenthesize":8,"./tokenize":9,currify:10,squad:11}]},{},["lisp"])("lisp")});
